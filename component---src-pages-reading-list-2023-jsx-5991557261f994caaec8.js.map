{"version":3,"sources":["webpack:///./src/pages/reading-list-2023.jsx","webpack:///./src/components/graphs/reading-graph.jsx"],"names":["ReadingList2022","React","createElement","Layout","tab","SEO","title","Title","Text","description","Flex","Box","width","_","widescreen","ReadingGraph","year","OList","url","map","book","i","key","ExtLink","href","td","_Component","apply","arguments","_inheritsLoose","_proto","prototype","componentDidMount","this","drawChart","window","addEventListener","bind","div","d3","props","select","remove","height","node","offsetHeight","offsetWidth","svg","append","attr","render","data","margin","innerWidth","innerHeight","yScale","domain","d","books","range","nice","xScale","month","g","call","ticks","tickFormat","style","text","tickSizeOuter","lineGenerator","x","y","areaGenerator","y0","y1","focus","focusText","on","x0","rangePoints","step","mouseMonth","yDomain","yRange","yRangePoints","selectedData","html","length","then","forEach","id","className","Component"],"mappings":"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","file":"component---src-pages-reading-list-2023-jsx-5991557261f994caaec8.js","sourcesContent":["import React from \"react\"\n\nimport Layout from \"../components/layouts/layout\"\nimport SEO from \"../components/seo\"\nimport ReadingGraph from \"../components/graphs/reading-graph\"\n\nimport { Box, ExtLink, Flex, OList, Text, Title } from \"../components/basics\"\n\nexport default function ReadingList2022() {\n  const books = [\n    {\n      title: \"Bad Gays\",\n      url: \"https://www.goodreads.com/en/book/show/59012057\",\n    },\n    {\n      title: \"Four Thousand Weeks: Time Management for Mortals\",\n      url: \"https://www.goodreads.com/book/show/54785515-four-thousand-weeks\",\n    },\n    {\n      title: \"Tomorrow and Tomorrow and Tomorrow\",\n      url: \"https://www.goodreads.com/en/book/show/58784475\",\n    },\n    {\n      title: \"Black Cake\",\n      url: \"https://www.goodreads.com/en/book/show/57926137\",\n    },\n    // {title: \"\", url: \"\"},\n  ]\n  const year = \"2023\"\n\n  return (\n    <Layout tab=\"Reading\">\n      <SEO title=\"Reading\" />\n      <Title>{\"Reading List \" + year}</Title>\n      <Text description>{\"What I read in \" + year}</Text>\n\n      <Flex>\n        <Box width={{ _: \"100%\", widescreen: \"100%\" }}>\n          <ReadingGraph year={year} />\n          <OList>\n            {books.map((book, i) => {\n              return (\n                <li key={i}>\n                  <Text>\n                    <ExtLink href={book.url} td=\"none\">\n                      {book.title}\n                    </ExtLink>\n                  </Text>\n                </li>\n              )\n            })}\n          </OList>\n        </Box>\n      </Flex>\n    </Layout>\n  )\n}\n","import React, { Component } from \"react\"\nimport * as d3 from \"d3\"\nimport \"./graph-css.css\"\n\nclass ReadingGraph extends Component {\n  componentDidMount() {\n    this.drawChart();\n    window.addEventListener(\"resize\", this.drawChart.bind(this));\n  }\n  \n  drawChart() {\n    const div = d3.select(\"#scatter-\"+this.props.year);\n    div.select('svg').remove();\n\n    const height = +div.node().offsetHeight;\n    const width = +div.node().offsetWidth;\n\n    const svg = div.append('svg')\n      .attr('width', width)\n      .attr('height', height);\n\n    const render = data => {\n\n      const margin = {top: 10, right: 20, bottom: 40, left: 50};\n      const innerWidth = width - margin.left - margin.right;\n      const innerHeight = height - margin.top - margin.bottom;\n\n      const yAxisLabel = '# of books read'\n\n      const yScale = d3.scaleLinear()\n        .domain([0, d3.max(data, d => d.books)])\n        .range([innerHeight, 0])\n        .nice();\n\n      const xScale = d3.scalePoint()\n        .domain(data.map(d => d.month))\n        .range([0, innerWidth]);\n\n      const g = svg.append('g')\n        .attr('transform', `translate(${margin.left}, ${margin.top})`);\n\n      // yAxisG\n      const yAxisG = g.append('g')\n        .call(d3.axisLeft(yScale)\n          .ticks(7)\n          .tickFormat(d3.format('d')));\n\n      yAxisG.append('text')\n        .attr('class', 'axis-label')\n        .attr('fill', 'black')\n        .attr('y', -35)\n        .attr('x', -innerHeight / 2)\n        .attr('transform', 'rotate(-90)')\n        .style('text-anchor', 'middle')\n        .text(yAxisLabel);\n      \n      // xAxisG\n      g.append('g')\n        .call(d3.axisBottom(xScale)\n          .tickSizeOuter(0))\n        .attr('transform', `translate(0, ${innerHeight})`);\n\n      // line chart\n      const lineGenerator = d3.line()\n        .x(d => xScale(d.month))\n        .y(d => yScale(d.books));\n\n      g.append('path')\n        .attr('class', 'line-path')\n        .attr('d', lineGenerator(data));\n\n      // area chart \n      const areaGenerator = d3.area()\n        .x(d => xScale(d.month))\n        .y0(innerHeight)\n        .y1(d => yScale(d.books));\n\n      g.append('path')\n        .attr('class', 'area-path')\n        .attr('d', areaGenerator(data));\n\n      // interactive label stuff\n      const focus = g\n        .append(\"circle\")\n        .style(\"fill\", \"#FFD148\")\n        .attr(\"stroke\", \"#FFD148\")\n        .attr(\"r\", 4)\n        .style(\"opacity\", 0)\n\n      const focusText = g.append('text')\n          .style(\"opacity\", 0)\n          .attr(\"text-anchor\", \"left\")\n          .attr(\"alignment-baseline\", \"middle\")\n\n      g.append('rect')\n        .attr('class', 'some-rect')\n        .style(\"fill\", \"none\")\n        .style(\"pointer-events\", \"all\")\n        .attr('width', width)\n        .attr('height', height)\n        .on('mouseover', mouseover)\n        .on('mousemove', mousemove)\n        .on('mouseout', mouseout);\n\n      function mouseover() {\n        focus.style(\"opacity\", 1)\n        focusText.style(\"opacity\", 1)\n      }\n\n      function mousemove() {\n        var x0 = d3.mouse(this)[0];\n        var domain = xScale.domain();\n        var range = xScale.range();\n        var rangePoints = d3.range(range[0], range[1]+15, xScale.step())\n        var i = (d3.bisect(rangePoints, x0) - 1) < 0 ? 0 : d3.bisect(rangePoints, x0) - 1\n        var mouseMonth = domain[d3.bisect(rangePoints, x0) - 1];\n\n        var yDomain = yScale.domain();\n        var yRange = yScale.range();\n        var yRangePoints = d3.range(yRange[0], yRange[1], -(yRange[0]/yDomain[1]))\n\n        var selectedData = data[i]\n        focus\n          .attr(\"cx\", rangePoints[i])\n          .attr(\"cy\", yRangePoints[selectedData.books])\n        focusText\n          .html(`${mouseMonth} - ${selectedData.books} ${selectedData.books > 1 ? \"books\" : \"book\"}`)\n          .attr(\"x\", (i >= domain.length-2 && domain.length > 2) || i >= domain.length-1 ? rangePoints[i]-140 : rangePoints[i]+15)\n          .attr(\"y\", yRangePoints[selectedData.books])\n      }\n\n      function mouseout() {\n        focus.style(\"opacity\", 0)\n        focusText.style(\"opacity\", 0)\n      }\n\n    };\n\n    d3.csv(\"/data/reading-\"+this.props.year+\".csv\").then(data => {\n      data.forEach(d => {\n        d.books = +d.books;\n      });\n      render(data);\n    });\n  };\n\n  render() {\n    return (\n      <div id={\"scatter-\"+this.props.year} className=\"hide-graph graphDiv\"></div>\n    )\n  }\n}\n\nexport default ReadingGraph\n"],"sourceRoot":""}