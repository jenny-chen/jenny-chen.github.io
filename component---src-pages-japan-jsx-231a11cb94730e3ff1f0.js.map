{"version":3,"sources":["webpack:///./src/components/photoModal.jsx","webpack:///./node_modules/topojson-client/src/identity.js","webpack:///./node_modules/topojson-client/src/transform.js","webpack:///./node_modules/topojson-client/src/feature.js","webpack:///./node_modules/topojson-client/src/reverse.js","webpack:///./src/components/maps/japan.js","webpack:///./src/images/japan-2019/info.js","webpack:///./src/pages/japan.jsx"],"names":["Modal","styled","Box","withConfig","displayName","componentId","props","hidden","ModalContent","_ref","theme","mediaQueries","tablet","PhotoModal","React","createElement","onClick","e","setModalHidden","stopPropagation","Flex","boxWidth","GatsbyImage","alt","photo","name","key","image","Heading","Text","info","location","date","description","map","line","index","x","transform","identity","x0","y0","kx","scale","ky","dx","translate","dy","input","i","j","n","length","output","Array","o","topology","objects","type","features","geometries","id","bbox","properties","geometry","transformPoint","arcs","arc","points","pop","a","k","push","t","array","reverse","point","p","ring","polygon","coordinates","JapanMap","_Component","_this","call","getLoc","state","loc","drawChart","div","d3","select","remove","height","node","offsetHeight","width","offsetWidth","console","log","svg","append","attr","projection","center","path","selected","title_loc","visited","then","data","topojson","japan","selectAll","enter","style","nam","includes","on","setLoc","newLoc","newLocJa","nam_ja","setState","loc_ja","this","title_loc_ja","setTitleLoc","_inheritsLoose","_proto","prototype","componentDidMount","window","addEventListener","bind","render","Fragment","className","Component","japanPhotoInformation","tokyo_fear","tokyo_ginza_sushi","tokyo_mtfuji_1","tokyo_mtfuji_2","tokyo_museum_hat","tokyo_outside_sushidai","aichi_lamp","aichi_street","aichi_udon","kyoto_bird","kyoto_sit","kyoto_street","kyoto_train","nara_deer_1","nara_deer_2","nara_mochi","osaka_takoyaki","fukuoka_bridge","fukuoka_funnymen","fukuoka_museum","Japan","useState","openPhoto","setOpenPhoto","modalHidden","photos","allPhotos","allFile","edges","place","split","getImage","childImageSharp","Layout","tab","SEO","title","Title","Link","href","toLowerCase","cursor","text","newModalHidden"],"mappings":"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","file":"component---src-pages-japan-jsx-231a11cb94730e3ff1f0.js","sourcesContent":["import React from \"react\"\nimport styled from \"styled-components\"\nimport { GatsbyImage } from \"gatsby-plugin-image\"\n\nimport {\n  Box,\n  Flex,\n  Heading,\n  Text,\n} from \"../components/basics\"\n\nconst Modal = styled(Box)`\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: ${props => props.hidden ? \"0\" : \"1\"};\n  transition: all 0.2s ease-in-out;\n  pointer-events: ${props => props.hidden ? \"none\" : \"auto\"};\n`\n\nconst ModalContent = styled(Box)`\n  width: 50%;\n  background-color: white;\n  padding: 35px;\n\n  ${({ theme }) => `${theme.mediaQueries.tablet} {\n    padding: 50px;\n  }`}\n`\n\nexport default function PhotoModal(props) {\n  return (\n    <Modal hidden={props.hidden} onClick={e => props.setModalHidden(true)}>\n      <ModalContent onClick={e => e.stopPropagation()}>\n        <Flex boxWidth=\"48%\">\n          <Box>\n            <GatsbyImage\n              alt={props.photo.name}\n              key={props.photo.name}\n              image={props.photo.image}\n            />\n          </Box>\n          <Box>\n            <Flex boxWidth=\"50%\">\n              <Box>\n                <Heading>location</Heading>\n                <Text>{props.info.location}</Text>\n              </Box>\n              <Box>\n                <Heading>date</Heading>\n                <Text>{props.info.date}</Text>\n              </Box>\n            </Flex>\n            <div>\n              <Heading>description</Heading>\n              {props.info.description.map((line, index) => {\n                return <Text key={index}>{line}</Text>\n              })}\n            </div>\n          </Box>\n          </Flex>\n      </ModalContent>\n    </Modal>\n  )\n}\n","export default function (x) {\n  return x;\n}","import identity from \"./identity.js\";\nexport default function (transform) {\n  if (transform == null) return identity;\n  var x0,\n    y0,\n    kx = transform.scale[0],\n    ky = transform.scale[1],\n    dx = transform.translate[0],\n    dy = transform.translate[1];\n  return function (input, i) {\n    if (!i) x0 = y0 = 0;\n    var j = 2,\n      n = input.length,\n      output = new Array(n);\n    output[0] = (x0 += input[0]) * kx + dx;\n    output[1] = (y0 += input[1]) * ky + dy;\n    while (j < n) output[j] = input[j], ++j;\n    return output;\n  };\n}","import reverse from \"./reverse.js\";\nimport transform from \"./transform.js\";\nexport default function (topology, o) {\n  if (typeof o === \"string\") o = topology.objects[o];\n  return o.type === \"GeometryCollection\" ? {\n    type: \"FeatureCollection\",\n    features: o.geometries.map(function (o) {\n      return feature(topology, o);\n    })\n  } : feature(topology, o);\n}\nfunction feature(topology, o) {\n  var id = o.id,\n    bbox = o.bbox,\n    properties = o.properties == null ? {} : o.properties,\n    geometry = object(topology, o);\n  return id == null && bbox == null ? {\n    type: \"Feature\",\n    properties: properties,\n    geometry: geometry\n  } : bbox == null ? {\n    type: \"Feature\",\n    id: id,\n    properties: properties,\n    geometry: geometry\n  } : {\n    type: \"Feature\",\n    id: id,\n    bbox: bbox,\n    properties: properties,\n    geometry: geometry\n  };\n}\nexport function object(topology, o) {\n  var transformPoint = transform(topology.transform),\n    arcs = topology.arcs;\n  function arc(i, points) {\n    if (points.length) points.pop();\n    for (var a = arcs[i < 0 ? ~i : i], k = 0, n = a.length; k < n; ++k) {\n      points.push(transformPoint(a[k], k));\n    }\n    if (i < 0) reverse(points, n);\n  }\n  function point(p) {\n    return transformPoint(p);\n  }\n  function line(arcs) {\n    var points = [];\n    for (var i = 0, n = arcs.length; i < n; ++i) arc(arcs[i], points);\n    if (points.length < 2) points.push(points[0]); // This should never happen per the specification.\n    return points;\n  }\n  function ring(arcs) {\n    var points = line(arcs);\n    while (points.length < 4) points.push(points[0]); // This may happen if an arc has only two points.\n    return points;\n  }\n  function polygon(arcs) {\n    return arcs.map(ring);\n  }\n  function geometry(o) {\n    var type = o.type,\n      coordinates;\n    switch (type) {\n      case \"GeometryCollection\":\n        return {\n          type: type,\n          geometries: o.geometries.map(geometry)\n        };\n      case \"Point\":\n        coordinates = point(o.coordinates);\n        break;\n      case \"MultiPoint\":\n        coordinates = o.coordinates.map(point);\n        break;\n      case \"LineString\":\n        coordinates = line(o.arcs);\n        break;\n      case \"MultiLineString\":\n        coordinates = o.arcs.map(line);\n        break;\n      case \"Polygon\":\n        coordinates = polygon(o.arcs);\n        break;\n      case \"MultiPolygon\":\n        coordinates = o.arcs.map(polygon);\n        break;\n      default:\n        return null;\n    }\n    return {\n      type: type,\n      coordinates: coordinates\n    };\n  }\n  return geometry(o);\n}","export default function (array, n) {\n  var t,\n    j = array.length,\n    i = j - n;\n  while (i < --j) t = array[i], array[i++] = array[j], array[j] = t;\n}","import React, { Component } from \"react\"\nimport * as d3 from \"d3\"\nimport * as topojson from \"topojson-client\";\nimport \"./japan.css\"\n\n\nclass JapanMap extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      title_loc: \"Japan\",\n      title_loc_ja: \"日本\",\n      loc: \"Japan\",\n      loc_ja: \"日本\",\n    };\n  }\n\n  getLoc = () => {\n    return this.state.loc\n  }\n\n  componentDidMount() {\n    this.drawChart();\n    window.addEventListener(\"resize\", this.drawChart.bind(this));\n  }\n\n  drawChart = () => {\n    const div = d3.select(\"#japan\");\n    div.select('svg').remove();\n\n    const height = +div.node().offsetHeight;\n    const width = +div.node().offsetWidth;\n    console.log(\"height: \", height)\n    console.log(\"width: \", width)\n\n    const svg = div.append('svg')\n      .attr(\"width\", width)\n      .attr(\"height\", height);\n\n    var projection = d3.geoMercator()\n      .scale(1200)\n      .center([137,37])\n      .translate([width/2,250])\n\n    var path = d3.geoPath().projection(projection);\n\n    var selected = this.state.title_loc\n\n    const visited = [\"Tokyo To\", \"Kyoto Fu\", \"Osaka Fu\", \"Fukuoka Ken\", \"Nara Ken\", \"Aichi Ken\"]\n    const selectedColor = \"#FFD148\";\n    const visitedColor = \"#f5d1c6\"\n    const nonVisitedColor = \"white\"\n\n    const setLoc = (newLoc, newLocJa) => {\n      this.setState({loc: newLoc, loc_ja: newLocJa})\n    }\n\n    const setTitleLoc = (newLoc, newLocJa) => {\n      this.setState({title_loc: newLoc})\n      this.setState({title_loc_ja: newLocJa})\n      this.props.setLoc(newLoc)\n      selected = this.state.title_loc\n    }\n\n    const resetLoc = () => {\n      this.setState({loc: this.state.title_loc, loc_ja: this.state.title_loc_ja})\n    }\n\n\n    d3.json(\"/json/topojapan.json\").then(data => {\n      var features = topojson.feature(data, data.objects.japan).features\n\n      svg.selectAll(\"path\")\n        .data(features)\n        .enter()\n        .append(\"path\")\n        .attr(\"d\", path)\n        .attr(\"stroke\", \"black\")\n        .style(\"stroke-width\", \"0.6\")\n        .style(\"fill\", function(e) {\n          if (selected === e.properties.nam) {\n            return selectedColor\n          } else if (visited.includes(e.properties.nam)) {\n            return visitedColor\n          } else {\n            return nonVisitedColor\n          }\n        })\n        .on(\"mouseover\", function(e) {\n          setLoc(e.properties.nam, e.properties.nam_ja)\n          if (visited.includes(e.properties.nam)) {\n            d3.select(this).style(\"fill\", \"#d9bbb2\")\n          } else {\n            d3.select(this).style(\"fill\", \"lightgrey\")\n          }\n        })\n        .on(\"mouseout\", function(e) {\n          if (e.properties.nam === selected) {\n            d3.select(this).style(\"fill\", selectedColor)\n          } else if (visited.includes(e.properties.nam)) {\n            d3.select(this).style(\"fill\", visitedColor)\n          } else {\n            d3.select(this).style(\"fill\", nonVisitedColor)\n          }\n          resetLoc()\n        })\n        .on(\"click\", function(e) {\n          if (visited.includes(e.properties.nam)) {\n            svg.selectAll(\"path\")\n              .style(\"fill\", function(e) {\n                if (visited.includes(e.properties.nam)) {\n                  return visitedColor\n                } else {\n                  return nonVisitedColor\n                }\n              })\n            setTitleLoc(e.properties.nam, e.properties.nam_ja)\n            d3.select(this).style(\"fill\", selectedColor)\n          }\n        })\n    });\n\n  };\n\n  render() {\n    return (\n      <>\n        <div id=\"japan-labels\">\n          <p id=\"english-label\">{this.state.loc}</p>\n          <p id=\"japanese-label\">{this.state.loc_ja}</p>\n        </div>\n        <div id=\"japan\" className=\"mapDiv\"></div>\n      </>\n    )\n  }\n}\n\nexport default JapanMap\n","export const japanPhotoInformation = {\n         tokyo_fear: {\n           date: \"2019-08-30\",\n           location: \"Chuo City, Tokyo\",\n           description: [\n             \"After a meal of delicious Japanese BBQ, I was forced against my will to eat a round of offal.\",\n             \"I had tried motsunabe the day before and already knew that offal wasn't for me, thus my look of horror.\",\n           ],\n         },\n         tokyo_ginza_sushi: {\n           date: \"2019-08-21\",\n           location: \"Kyubey, Chuo City, Tokyo\",\n           description: [\n             \"Sushi chef at work during our lunch at Kyubey in Ginza.\",\n           ],\n         },\n         tokyo_mtfuji_1: {\n           date: \"2019-08-22\",\n           location: \"Mt. Fuji\",\n           description: [\n             \"On our second day in Japan (still massively jetlagged), we rode the bus to Shizuoka and completed an overnight hike up Mt. Fuji where we were rewarded with this glorious sunrise.\",\n             \"I also experienced a huge crash later that day (after nearly two full days without sleep), culminating in me falling asleep upright on the subway and losing my bus pass :')\",\n           ],\n         },\n         tokyo_mtfuji_2: {\n           date: \"2019-08-22\",\n           location: \"Mt. Fuji\",\n           description: [\n             \"Yet another angle of the sunrise from Fuji. There was something surreal about standing up there watching the rays of the sun kiss the clouds.\",\n           ],\n         },\n         tokyo_museum_hat: {\n           date: \"2019-08-20\",\n           location: \"Tokyo National Museum\",\n           description: [\n             \"This one's pretty self-explanatory: I found a cool hat and put it on. The museum also provided cool audio info through the headphones in order to provide more context for the artwork on display.\",\n           ],\n         },\n         tokyo_outside_sushidai: {\n           date: \"2019-08-20\",\n           location: \"Sushi Dai, Koto City, Tokyo\",\n           description: [\n             \"A picture of the view outside Sushi Dai.\",\n             \"This was our first real meal in Japan, slept for an hour and immediately got up to line up at 3 AM so we could get in when it opened at 6 AM. We were fed wrong info though, the other customers only started showing up at around 4:30 AM.\",\n           ],\n         },\n\n         aichi_lamp: {\n           date: \"2019-08-23\",\n           location: \"Nagoya, Aichi\",\n           description: [\n             \"A lamp post outside the restaurant Atsuta Horaiken. We were served the greatest unagi don here. It really made us want to just keep eating unagi for the rest of our trip.\",\n           ],\n         },\n         aichi_street: {\n           date: \"2019-08-23\",\n           location: \"Nagoya, Aichi\",\n           description: [\n             \"Snapped this while crossing a bridge on our way to dinner. Though not much of a subject in these types of pictures, I tend to take a number of mundane photos just to help me document my entire experience, not just the highs.\",\n           ],\n         },\n         aichi_udon: {\n           date: \"2019-08-23\",\n           location: \"Nagoya, Aichi\",\n           description: [\n             \"On our way to Nagoya Castle, we passed by this udon joint. A few seconds later we looked at each other and agreed we had to go back to try the udon.\",\n             \"Good decision on our part.\",\n           ],\n         },\n\n         kyoto_bird: {\n           date: \"2019-08-24\",\n           location: \"Maruyama Park, Kyoto\",\n           description: [\"Cool bird on a rock.\"],\n         },\n         kyoto_sit: {\n           date: \"2019-08-24\",\n           location: \"Maruyama Park, Kyoto\",\n           description: [\n             \"A pair of sisters in the wild.\",\n             \"I remember being a little nervous I would tip myself backwards.\",\n           ],\n         },\n         kyoto_street: {\n           date: \"2019-08-24\",\n           location: \"Shimogyo, Kyoto\",\n           description: [\n             \"I have a strange affinity for the streets of Japan.\",\n             \"Maybe it's the architecture, maybe it's the anime vibes. I guess we'll never know.\",\n           ],\n         },\n         kyoto_train: {\n           date: \"2019-08-25\",\n           location: \"Kyoto Station\",\n           description: [\"A piece of Japan's intricate train system.\"],\n         },\n\n         nara_deer_1: {\n           date: \"2019-08-26\",\n           location: \"Nara Park\",\n           description: [\n             \"Tourists visit Nara for the deer and sad to say, we were no different.\",\n           ],\n         },\n         nara_deer_2: {\n           date: \"2019-08-26\",\n           location: \"Nara Park\",\n           description: [\"My deer friend.\"],\n         },\n         nara_mochi: {\n           date: \"2019-08-26\",\n           location: \"Nara Park\",\n           description: [\n             \"Never one to refuse food, I also stuffed myself on fresh red bean mochi.\",\n           ],\n         },\n\n         osaka_takoyaki: {\n           date: \"2019-08-26\",\n           location: \"Dotonburi, Osaka\",\n           description: [\n             \"We didn't spend too long in Osaka but we did check out Dotonburi and ate some street snacks.\",\n           ],\n         },\n\n         fukuoka_bridge: {\n           date: \"2019-08-28\",\n           location: \"Fukuoka\",\n           description: [\"Me on a bridge.\"],\n         },\n         fukuoka_funnymen: {\n           date: \"2019-08-29\",\n           location: \"Fukuoka\",\n           description: [\"Funny men on the placemat of an unagi restaurant.\"],\n         },\n         fukuoka_museum: {\n           date: \"2019-08-29\",\n           location: \"Fukuoka\",\n           description: [\n             \"One of my favourite pieces at a museum we walked into on a whim.\",\n           ],\n         },\n       }\n","import React, { useState } from \"react\"\nimport { graphql } from \"gatsby\"\nimport { GatsbyImage, getImage } from \"gatsby-plugin-image\"\n\nimport Layout from \"../components/layouts/layout\"\nimport SEO from \"../components/seo\"\nimport JapanMap from \"../components/maps/japan\"\nimport PhotoModal from \"../components/photoModal\"\n\nimport { japanPhotoInformation } from \"../images/japan-2019/info\"\n\nimport { Box, Flex, Link, Text, Title } from \"../components/basics\"\n\nexport default function Japan({ data }) {\n  const [loc, setLoc] = useState(\"Japan\")\n  const [openPhoto, setOpenPhoto] = useState({})\n  const [modalHidden, setModalHidden] = useState(true)\n\n  var photos = {}\n  var allPhotos = data.allFile.edges\n\n  for (var i = 0; i < allPhotos.length; i++) {\n    var name = allPhotos[i].node.name\n    var place = name.split(\"_\")[0]\n    if (place in photos) {\n      photos[place].push({\n        name: name,\n        image: getImage(allPhotos[i].node.childImageSharp),\n      })\n    } else {\n      photos[place] = [\n        { name: name, image: getImage(allPhotos[i].node.childImageSharp) },\n      ]\n    }\n  }\n\n  return (\n    <Layout tab=\"Japan\">\n      <SEO title=\"Japan\" />\n      <Title>\n        <Link href=\"/writing/visualizing-japan\">Japan</Link>\n      </Title>\n      <Text description>August 2019</Text>\n\n      <JapanMap setLoc={newLoc => setLoc(newLoc)} />\n\n      <Flex boxWidth=\"49.5%\" photos>\n        {loc !== \"Japan\" &&\n          photos[loc.split(\" \")[0].toLowerCase()].map((photo, index) => {\n            return (\n              <Box\n                key={photo.name}\n                photo\n                onClick={e => {\n                  setOpenPhoto(photo)\n                  setModalHidden(false)\n                }}\n              >\n                <GatsbyImage\n                  alt={photo.name}\n                  key={photo.name}\n                  image={photo.image}\n                  style={{ cursor: \"pointer\" }}\n                />\n              </Box>\n            )\n          })}\n      </Flex>\n\n      <PhotoModal\n        text=\"modal text\"\n        hidden={modalHidden}\n        photo={openPhoto}\n        setModalHidden={newModalHidden => setModalHidden(newModalHidden)}\n        info={\n          japanPhotoInformation[openPhoto.name] || {\n            date: \"\",\n            location: \"\",\n            description: [\"\"],\n          }\n        }\n      />\n    </Layout>\n  )\n}\n\nexport const pageQuery = graphql`\n         query JapanPhotos {\n           allFile(\n             filter: {\n               extension: { regex: \"/(jpg)|(jpeg)|(png)/\" }\n               dir: { regex: \"/images/japan-2019/\" }\n             }\n           ) {\n             edges {\n               node {\n                 id\n                 name\n                 childImageSharp {\n                   gatsbyImageData(\n                     placeholder: BLURRED\n                     formats: [AUTO, WEBP, AVIF]\n                   )\n                 }\n               }\n             }\n           }\n         }\n       `\n"],"sourceRoot":""}